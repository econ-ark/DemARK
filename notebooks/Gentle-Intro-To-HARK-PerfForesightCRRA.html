

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>A Gentle Introduction to HARK: The Perfect Foresight Model &#8212; DemARK</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/Gentle-Intro-To-HARK-PerfForesightCRRA';</script>
    <link rel="shortcut icon" href="../_static/econ-ark-logo-small.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="A Demonstration of the Harmenberg (2021) Aggregation Method" href="Harmenberg-Aggregation.html" />
    <link rel="prev" title="A Gentle Introduction to HARK: Buffer Stock Saving" href="Gentle-Intro-To-HARK-Buffer-Stock-Model.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../README.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/econ-ark-logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/econ-ark-logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../README.html">
                    DemARK
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Alternative-Combos-Of-Parameter-Values.html">Alternative Combinations of Parameter Values</a></li>


<li class="toctree-l1"><a class="reference internal" href="ChangeLiqConstr.html">What Happens To the Consumption Function When A Liquidity Constraint is Tightened?</a></li>
<li class="toctree-l1"><a class="reference internal" href="Chinese-Growth.html">Do Precautionary Motives Explain China’s High Saving Rate?</a></li>
<li class="toctree-l1"><a class="reference internal" href="DCEGM-Upper-Envelope.html">DCEGM Upper Envelope</a></li>






<li class="toctree-l1"><a class="reference internal" href="DiamondOLG.html">The Diamond OLG Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="FisherTwoPeriod.html">The Fisher Two-Period Optimal Consumption Problem</a></li>

<li class="toctree-l1"><a class="reference internal" href="Gentle-Intro-To-HARK-Buffer-Stock-Model.html">A Gentle Introduction to HARK: Buffer Stock Saving</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">A Gentle Introduction to HARK: The Perfect Foresight Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="Harmenberg-Aggregation.html">A Demonstration of the Harmenberg (2021) Aggregation Method</a></li>







<li class="toctree-l1"><a class="reference internal" href="IncExpectationExample.html">The Persistent Shock Model and Income Expectations</a></li>
<li class="toctree-l1"><a class="reference internal" href="KeynesFriedmanModigliani.html">Introduction: Keynes, Friedman, Modigliani</a></li>
<li class="toctree-l1"><a class="reference internal" href="LC-Model-Expected-Vs-Realized-Income-Growth.html">Expectated vs Realized Income Growth in A Standard Life Cycle Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="LifeCycleModelTheoryVsData.html">The Life Cycle Model: Theory vs Data</a></li>

<li class="toctree-l1"><a class="reference internal" href="Lucas-Asset-Pricing-Model.html">Lucas Asset Pricing Model</a></li>





<li class="toctree-l1"><a class="reference internal" href="MPC-Out-of-Credit-vs-MPC-Out-of-Income.html">The MPC out of Credit vs the MPC Out of Income</a></li>
<li class="toctree-l1"><a class="reference internal" href="Micro-and-Macro-Implications-of-Very-Impatient-HHs.html">Micro- and Macroeconomic Implications of Very Impatient Households</a></li>

<li class="toctree-l1"><a class="reference internal" href="Nondurables-During-Great-Recession.html">Spending on Nondurables During the Great Recession</a></li>
<li class="toctree-l1"><a class="reference internal" href="PerfForesightCRRA-Approximation.html">Perfect Foresight CRRA Model - Approximation</a></li>
<li class="toctree-l1"><a class="reference internal" href="PerfForesightCRRA-SavingRate.html">Perfect Foresight CRRA Model - Saving Rate</a></li>
<li class="toctree-l1"><a class="reference internal" href="Structural-Estimates-From-Empirical-MPCs-Fagereng-et-al.html">Making Structural Estimates From Empirical Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="TractableBufferStock-Interactive.html">The Tractable Buffer Stock Model</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/econ-ark/DemARK/master?urlpath=lab/tree/notebooks/Gentle-Intro-To-HARK-PerfForesightCRRA.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://hub.econ-ark.org/hub/user-redirect/git-pull?repo=https%3A//github.com/econ-ark/DemARK&urlpath=lab/tree/DemARK/notebooks/Gentle-Intro-To-HARK-PerfForesightCRRA.ipynb&branch=master" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onJupyterHub"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_jupyterhub.svg">
  </span>
<span class="btn__text-container">JupyterHub</span>
</a>
</li>
      
      
      
      
      <li><a href="https://colab.research.google.com/github/econ-ark/DemARK/blob/master/notebooks/Gentle-Intro-To-HARK-PerfForesightCRRA.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/notebooks/Gentle-Intro-To-HARK-PerfForesightCRRA.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>A Gentle Introduction to HARK: The Perfect Foresight Model</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#your-first-hark-model-perfect-foresight">Your First HARK Model: Perfect Foresight</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#representing-agents-in-hark">Representing Agents in HARK</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#solving-an-agent-s-problem">Solving an Agent’s Problem</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#changing-agent-parameters">Changing Agent Parameters</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="a-gentle-introduction-to-hark-the-perfect-foresight-model">
<h1>A Gentle Introduction to HARK: The Perfect Foresight Model<a class="headerlink" href="#a-gentle-introduction-to-hark-the-perfect-foresight-model" title="Permalink to this headline">#</a></h1>
<p><a class="reference external" href="https://econ-ark.org/materials/gentle-intro-to-hark-perfforesightcrra#launch"><img alt="badge" src="https://img.shields.io/badge/Launch%20using%20-Econ--ARK-blue" /></a></p>
<p>This notebook provides a simple, hands-on tutorial for first time HARK users (and maybe first time Python users) who have a basic knowledge of the theory of intertemporal choice (roughly at the level of first year PhD students - see <a class="reference external" href="http://www.econ2.jhu.edu/people/ccarroll/public/lecturenotes/consumption/PerfForesightCRRA/">PerfForesightCRRA</a> for a full exposition of the consumption theory).</p>
<p>It does not go “into the weeds” - we have hidden some code cells that do boring things that you don’t need to digest on your first experience with HARK.  Our aim is to convey a feel for how the toolkit works.</p>
<p>For the benfit of readers for whom this is your first experience with Python, we have put important Python concepts in <strong>boldface</strong>.</p>
<p>For those for whom this is the first time they have used a Jupyter notebook, we have put Jupyter instructions in <em>italics</em>. Only cursory definitions (if any) are provided here.  If you want to learn more, there are many online Python and Jupyter tutorials.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This cell has just a bit of initial setup. You can click the triangle to the left to expand it.</span>
<span class="c1"># Click the &quot;Run&quot; button immediately above the notebook in order to execute the contents of any cell</span>
<span class="c1"># WARNING: Each cell in the notebook relies upon results generated by previous cells</span>
<span class="c1">#   The most common problem beginners have is to execute a cell before all its predecessors</span>
<span class="c1">#   If you do this, you can restart the kernel (see the &quot;Kernel&quot; menu above) and start over</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">from</span> <span class="nn">HARK.utilities</span> <span class="kn">import</span> <span class="n">plot_funcs</span>

<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>


<span class="k">def</span> <span class="nf">mystr</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{:.4f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="your-first-hark-model-perfect-foresight">
<h2>Your First HARK Model: Perfect Foresight<a class="headerlink" href="#your-first-hark-model-perfect-foresight" title="Permalink to this headline">#</a></h2>
<p>We are studying a consumer with constant relative risk aversion utility <span class="math notranslate nohighlight">\(U(C) = \frac{C^{1-\rho}}{1-\rho}\)</span> who has perfect foresight about everything except the (stochastic) date of death; death occurs with probability <span class="math notranslate nohighlight">\(\mathsf{D}\)</span>, implying  a “survival probability” <span class="math notranslate nohighlight">\((1-\mathsf{D}) &lt; 1\)</span>.  Permanent labor income <span class="math notranslate nohighlight">\(P_t\)</span> grows from period to period by a factor <span class="math notranslate nohighlight">\(\Gamma_t\)</span>.  At the beginning of each period <span class="math notranslate nohighlight">\(t\)</span>, the consumer has some amount of market resources <span class="math notranslate nohighlight">\(M_t\)</span> (which includes both market wealth and currrent income - think of it as bank balances after you have received your paycheck).  The consumer must choose how much of those resources to consume <span class="math notranslate nohighlight">\(C_t\)</span> and how much to retain in a riskless asset <span class="math notranslate nohighlight">\(A_t\)</span> which will earn return factor <span class="math notranslate nohighlight">\(R\)</span>. The agent receives a flow of utility <span class="math notranslate nohighlight">\(U(C_t)\)</span> from consumption and geometrically discounts future utility flows by factor <span class="math notranslate nohighlight">\(\beta\)</span>. Between periods, the agent dies with probability <span class="math notranslate nohighlight">\(\mathsf{D}_t\)</span>, ending his problem.  (This means that the possibility of death is merely another reason to discount the future more – you might not be there to enjoy it!)</p>
<p>The agent’s problem can be written in Bellman form as:</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{eqnarray*}
V_t(M_t,P_t) &amp;=&amp; \max_{C_t} U(C_t) + \beta (1-\mathsf{D}_{t+1}) V_{t+1}(M_{t+1},P_{t+1}), \\
&amp; s.t. &amp; \\
%A_t &amp;=&amp; M_t - C_t, \\
M_{t+1} &amp;=&amp; R (M_{t}-C_{t}) + Y_{t+1}, \\
P_{t+1} &amp;=&amp; \Gamma_{t+1} P_t, \\
\end{eqnarray*}\]</div>
<p>A particular perfect foresight agent’s problem can be characterized by values of risk aversion <span class="math notranslate nohighlight">\(\rho\)</span>, discount factor <span class="math notranslate nohighlight">\(\beta\)</span>, and return factor <span class="math notranslate nohighlight">\(R\)</span>, along with sequences of income growth factors <span class="math notranslate nohighlight">\(\{ \Gamma_t \}\)</span> and death probabilities <span class="math notranslate nohighlight">\(\{\mathsf{D}_t\}\)</span>.  To keep things simple, let’s forget about “sequences” of income growth and mortality, and just think about an <em>infinite horizon</em> consumer with constant income growth and survival probability.</p>
</section>
<section id="representing-agents-in-hark">
<h2>Representing Agents in HARK<a class="headerlink" href="#representing-agents-in-hark" title="Permalink to this headline">#</a></h2>
<p>HARK represents agents solving this type of problem as <strong>instances</strong> of the <strong>class</strong> <span class="math notranslate nohighlight">\(\texttt{PerfForesightConsumerType}\)</span>, a <strong>subclass</strong> of <span class="math notranslate nohighlight">\(\texttt{AgentType}\)</span>.  To make agents of this class, we must import the class itself into our workspace.  (Run the cell below in order to do this).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">HARK.ConsumptionSaving.ConsIndShockModel</span> <span class="kn">import</span> <span class="n">PerfForesightConsumerType</span>
</pre></div>
</div>
</div>
</div>
<p>The <span class="math notranslate nohighlight">\(\texttt{PerfForesightConsumerType}\)</span> class contains within itself the python code that constructs the solution for the perfect foresight model we are studying here, as specifically articulated in <a class="reference external" href="http://www.econ2.jhu.edu/people/ccarroll/public/lecturenotes/consumption/PerfForesightCRRA/">these lecture notes</a>.</p>
<p>To create an instance of <span class="math notranslate nohighlight">\(\texttt{PerfForesightConsumerType}\)</span>, we simply ‘call the class’; that is, we invoke it in a way that looks like the way other programming languages evaluate a function, passing as arguments the specific parameter values we want it to have.  In the hidden cell below, we define a <strong>dictionary</strong> named <span class="math notranslate nohighlight">\(\texttt{PF_dictionary}\)</span> with these parameter values:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-center head"><p>Param</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Code</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><span class="math notranslate nohighlight">\(\rho\)</span></p></td>
<td><p>Relative risk aversion</p></td>
<td><p><span class="math notranslate nohighlight">\(\texttt{CRRA}\)</span></p></td>
<td><p>2.5</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><span class="math notranslate nohighlight">\(\beta\)</span></p></td>
<td><p>Discount factor</p></td>
<td><p><span class="math notranslate nohighlight">\(\texttt{DiscFac}\)</span></p></td>
<td><p>0.96</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><span class="math notranslate nohighlight">\(R\)</span></p></td>
<td><p>Risk free interest factor</p></td>
<td><p><span class="math notranslate nohighlight">\(\texttt{Rfree}\)</span></p></td>
<td><p>1.03</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><span class="math notranslate nohighlight">\(1- \mathsf{D}\)</span></p></td>
<td><p>Survival probability</p></td>
<td><p><span class="math notranslate nohighlight">\(\texttt{LivPrb}\)</span></p></td>
<td><p>0.98</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><span class="math notranslate nohighlight">\(\Gamma\)</span></p></td>
<td><p>Income growth factor</p></td>
<td><p><span class="math notranslate nohighlight">\(\texttt{PermGroFac}\)</span></p></td>
<td><p>1.01</p></td>
</tr>
</tbody>
</table>
<p>For now, don’t worry about the specifics of dictionaries.  All you need to know is that a dictionary lets us pass many arguments wrapped up in one simple data structure.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This cell defines a parameter dictionary. You can expand it if you want to see what that looks like.</span>
<span class="n">PF_dictionary</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;CRRA&quot;</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">,</span>
    <span class="s2">&quot;DiscFac&quot;</span><span class="p">:</span> <span class="mf">0.96</span><span class="p">,</span>
    <span class="s2">&quot;Rfree&quot;</span><span class="p">:</span> <span class="mf">1.03</span><span class="p">,</span>
    <span class="s2">&quot;LivPrb&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.98</span><span class="p">],</span>
    <span class="s2">&quot;PermGroFac&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.01</span><span class="p">],</span>
    <span class="s2">&quot;T_cycle&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;cycles&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># To those curious enough to open this hidden cell, you might notice that we defined</span>
<span class="c1"># a few extra parameters in that dictionary: T_cycle, cycles, and AgentCount. Don&#39;t</span>
<span class="c1"># worry about these for now.</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s make an <strong>object</strong> named <span class="math notranslate nohighlight">\(\texttt{PFexample}\)</span> which is an <strong>instance</strong> of the <span class="math notranslate nohighlight">\(\texttt{PerfForesightConsumerType}\)</span> class. The object <span class="math notranslate nohighlight">\(\texttt{PFexample}\)</span> will bundle together the abstract mathematical description of the solution embodied in <span class="math notranslate nohighlight">\(\texttt{PerfForesightConsumerType}\)</span>, and the specific set of parameter values defined in <span class="math notranslate nohighlight">\(\texttt{PF_dictionary}\)</span>.  Such a bundle is created passing <span class="math notranslate nohighlight">\(\texttt{PF_dictionary}\)</span> to the class <span class="math notranslate nohighlight">\(\texttt{PerfForesightConsumerType}\)</span>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">PFexample</span> <span class="o">=</span> <span class="n">PerfForesightConsumerType</span><span class="p">(</span><span class="o">**</span><span class="n">PF_dictionary</span><span class="p">)</span>
<span class="c1"># the asterisks ** basically say &quot;here come some arguments&quot; to PerfForesightConsumerType</span>
</pre></div>
</div>
</div>
</div>
<p>In <span class="math notranslate nohighlight">\(\texttt{PFexample}\)</span>, we now have <em>defined</em> the problem of a particular infinite horizon perfect foresight consumer who knows how to solve this problem.</p>
</section>
<section id="solving-an-agent-s-problem">
<h2>Solving an Agent’s Problem<a class="headerlink" href="#solving-an-agent-s-problem" title="Permalink to this headline">#</a></h2>
<p>To tell the agent actually to solve the problem, we call the agent’s <span class="math notranslate nohighlight">\(\texttt{solve}\)</span>  <strong>method</strong>. (A <strong>method</strong> is essentially a function that an object runs that affects the object’s own internal characteristics – in this case, the method adds the consumption function to the contents of <span class="math notranslate nohighlight">\(\texttt{PFexample}\)</span>.)</p>
<p>The cell below calls the <span class="math notranslate nohighlight">\(\texttt{solve}\)</span> method for <span class="math notranslate nohighlight">\(\texttt{PFexample}\)</span></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">PFexample</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Running the <span class="math notranslate nohighlight">\(\texttt{solve}\)</span> method creates the <strong>attribute</strong> of <span class="math notranslate nohighlight">\(\texttt{PFexample}\)</span> named <span class="math notranslate nohighlight">\(\texttt{solution}.\)</span>  In fact, every subclass of <span class="math notranslate nohighlight">\(\texttt{AgentType}\)</span> works the same way: The class definition contains the abstract algorithm that knows how to solve the model, but to obtain the particular solution for a specific instance (paramterization/configuration), that instance must be instructed to <span class="math notranslate nohighlight">\(\texttt{solve()}\)</span> its problem.</p>
<p>The <span class="math notranslate nohighlight">\(\texttt{solution}\)</span> attribute is always a <em>list</em> of solutions to a sequence of single period solutions of the problem. In the case of an infinite horizon model like the one here, there is just one element in that list – the solution to all periods of the infinite horizon problem.  (In a life cycle model, there would be a list of solutions, one for each age).  The consumption function stored as the first element (element 0) of the solution list can be retrieved by:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">PFexample</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">cFunc</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;HARK.interpolation.LinearInterp at 0x7f3638021100&gt;
</pre></div>
</div>
</div>
</div>
<p>One of the results proven in the associated <a class="reference external" href="http://www.econ2.jhu.edu/people/ccarroll/public/lecturenotes/consumption/PerfForesightCRRA/">the lecture notes</a> is that, for the specific problem defined above, there is a solution in which the <em>ratio</em> <span class="math notranslate nohighlight">\(c = C/P\)</span> is a linear function of the <em>ratio</em> of market resources to permanent income, <span class="math notranslate nohighlight">\(m = M/P\)</span>.</p>
<p>This is why <span class="math notranslate nohighlight">\(\texttt{cFunc}\)</span> can be represented by a linear interpolation.  It can be plotted using the command below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mPlotTop</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">plot_funcs</span><span class="p">(</span><span class="n">PFexample</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">cFunc</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">mPlotTop</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/7e33edcd54466a3617810d766680787c7d5dcd9413885f93d0f717c5ffca5c7e.png" src="../_images/7e33edcd54466a3617810d766680787c7d5dcd9413885f93d0f717c5ffca5c7e.png" />
</div>
</div>
<p>The figure illustrates one of the surprising features of the perfect foresight model: A person with zero money should be spending at a rate more than double their income (<span class="math notranslate nohighlight">\(\texttt{cFunc}(0.) \approx 2.08\)</span>). What gives?</p>
<p>The answer is that we have not incorporated any constraint that would prevent the agent from borrowing against the entire PDV of future earnings – human wealth.</p>
<p>How much is that?  An equivalent question is: What’s the minimum value of <span class="math notranslate nohighlight">\(m_t\)</span> where the consumption function is defined (that is, where the consumer has a positive expected <em>total wealth</em> (the sum of human and nonuman wealth)?  Let’s check:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">humanWealth</span> <span class="o">=</span> <span class="n">PFexample</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">hNrm</span>
<span class="n">mMinimum</span> <span class="o">=</span> <span class="n">PFexample</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">mNrmMin</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="s2">&quot;This agent&#39;s human wealth is &quot;</span>
    <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">humanWealth</span><span class="p">)</span>
    <span class="o">+</span> <span class="s2">&quot; times his current income level.&quot;</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This agent&#39;s consumption function is defined down to m_t = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">mMinimum</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>This agent&#39;s human wealth is 50.49994992551661 times his current income level.
This agent&#39;s consumption function is defined down to m_t = -50.49994992551661
</pre></div>
</div>
</div>
</div>
<p>Yikes! Let’s take a look at the bottom of the consumption function.  In the cell below, set the bounds of the <span class="math notranslate nohighlight">\(\texttt{plot_funcs}\)</span> function to display down to the lowest defined value of the consumption function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># YOUR FIRST HANDS-ON EXERCISE!</span>
<span class="c1"># Fill in the value for &quot;mPlotBottom&quot; to plot the consumption function from the point where it is zero.</span>
<span class="n">mPlotBottom</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c1"># You should replace 0.0 with the correct answer</span>
<span class="n">plot_funcs</span><span class="p">(</span><span class="n">PFexample</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">cFunc</span><span class="p">,</span> <span class="n">mPlotBottom</span><span class="p">,</span> <span class="n">mPlotTop</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/4d4387bcaebff4b1929e1ba1616a6abd861a1773106fb2f9d8619b10cd4b0da8.png" src="../_images/4d4387bcaebff4b1929e1ba1616a6abd861a1773106fb2f9d8619b10cd4b0da8.png" />
</div>
</div>
</section>
<section id="changing-agent-parameters">
<h2>Changing Agent Parameters<a class="headerlink" href="#changing-agent-parameters" title="Permalink to this headline">#</a></h2>
<p>Suppose you wanted to change one (or more) of the parameters of the agent’s problem and see what that does.  We want to compare consumption functions before and after we change parameters, so let’s make a new instance of <span class="math notranslate nohighlight">\(\texttt{PerfForesightConsumerType}\)</span> by copying <span class="math notranslate nohighlight">\(\texttt{PFexample}\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">NewExample</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">PFexample</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>In Python, you can set an <strong>attribute</strong> of an object just like any other variable.  For example, we could make the new agent less patient:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">NewExample</span><span class="o">.</span><span class="n">DiscFac</span> <span class="o">=</span> <span class="mf">0.90</span>
<span class="n">NewExample</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>
<span class="n">mPlotBottom</span> <span class="o">=</span> <span class="n">NewExample</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">mNrmMin</span>
<span class="n">plot_funcs</span><span class="p">(</span>
    <span class="p">[</span><span class="n">NewExample</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">cFunc</span><span class="p">,</span> <span class="n">PFexample</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">cFunc</span><span class="p">],</span> <span class="n">mPlotBottom</span><span class="p">,</span> <span class="n">mPlotTop</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/dcdeea6f41a70b0c5bb129528115b0bb658b034d49ca76cb12b0422e57fa2195.png" src="../_images/dcdeea6f41a70b0c5bb129528115b0bb658b034d49ca76cb12b0422e57fa2195.png" />
</div>
</div>
<p>(Note that you can pass a list of functions to <span class="math notranslate nohighlight">\(\texttt{plot_funcs}\)</span> as the first argument rather than just a single function. Lists are written inside of [square brackets].)</p>
<p>Let’s try to deal with the “problem” of massive human wealth by making another consumer who has essentially no future income.  We can almost eliminate human wealth by making the permanent income growth factor <span class="math notranslate nohighlight">\(\textit{very}\)</span> small.</p>
<p>In <span class="math notranslate nohighlight">\(\texttt{PFexample}\)</span>, the agent’s income grew by 1 percent per period– his <span class="math notranslate nohighlight">\(\texttt{PermGroFac}\)</span> took the value 1.01. What if our new agent had a growth factor of 0.01 – his income <em>shrinks</em> by 99 percent each period?  In the cell below, set <span class="math notranslate nohighlight">\(\texttt{NewExample}\)</span>’s discount factor back to its original value, then set its <span class="math notranslate nohighlight">\(\texttt{PermGroFac}\)</span> attribute so that the growth factor is 0.01 each period.</p>
<p>Important: Recall that the model at the top of this document said that an agent’s problem is characterized by a sequence of income growth factors, but we tabled that concept.  Because <span class="math notranslate nohighlight">\(\texttt{PerfForesightConsumerType}\)</span> treats <span class="math notranslate nohighlight">\(\texttt{PermGroFac}\)</span> as a <em>time-varying</em> attribute, it must be specified as a <strong>list</strong> (with a single element in this case).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Revert NewExample&#39;s discount factor and make his future income minuscule</span>
<span class="c1"># your lines here!</span>

<span class="c1"># Compare the old and new consumption functions</span>
<span class="n">plot_funcs</span><span class="p">([</span><span class="n">PFexample</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">cFunc</span><span class="p">,</span> <span class="n">NewExample</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">cFunc</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/ee63a37075e4746c1267767ad3a3082d3d67d426694e3f0d60244e1259af8b8d.png" src="../_images/ee63a37075e4746c1267767ad3a3082d3d67d426694e3f0d60244e1259af8b8d.png" />
</div>
</div>
<p>Now <span class="math notranslate nohighlight">\(\texttt{NewExample}\)</span>’s consumption function has the same slope (MPC) as <span class="math notranslate nohighlight">\(\texttt{PFexample}\)</span>, but it emanates from (almost) zero– he has basically no future income to borrow against!</p>
<p>If you’d like, use the cell above to alter <span class="math notranslate nohighlight">\(\texttt{NewExample}\)</span>’s other attributes (relative risk aversion, etc) and see how the consumption function changes.  However, keep in mind that <em>no solution exists</em> for some combinations of parameters.  HARK should let you know if this is the case if you try to solve such a model.</p>
<p>Linear consumption functions are pretty boring, and you’d be justified in feeling unimpressed if all HARK could do was plot some lines. Let’s look at <a class="reference internal" href="Gentle-Intro-To-HARK-Buffer-Stock-Model.html"><span class="doc std std-doc">another model</span></a> that adds two important layers of complexity: income shocks and (artificial) borrowing constraints.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "econ-ark/DemARK",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="Gentle-Intro-To-HARK-Buffer-Stock-Model.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">A Gentle Introduction to HARK: Buffer Stock Saving</p>
      </div>
    </a>
    <a class="right-next"
       href="Harmenberg-Aggregation.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">A Demonstration of the Harmenberg (2021) Aggregation Method</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#your-first-hark-model-perfect-foresight">Your First HARK Model: Perfect Foresight</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#representing-agents-in-hark">Representing Agents in HARK</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#solving-an-agent-s-problem">Solving an Agent’s Problem</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#changing-agent-parameters">Changing Agent Parameters</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Econ-ARK Team
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>